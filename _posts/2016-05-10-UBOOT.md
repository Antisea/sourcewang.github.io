---
layout: post
title: U-BOOT 启动
---

简单的u-boot启动说明

## U-BOOT

* uboot正常启动后，会调用main_loop(void)函数，进入main_loop()之后，如果在规定的时间`CONFIG_BOOTDELAY`内，没有检查到任何按键事件的发生，就会去加载OS，并启动系统，比如把linux内核压缩镜像从nand flash中读到sdram ，然后执行它。

* 如果在`CONFIG_BOOTDELAY`时间内，用户按下键盘上的任意一个按键，uboot就会进入与用户交互的状态。如果用户在配置文件中定义了`CONFIG_SYS_HUSH_PARSER`，就会通过`parse_file_outer()`，去接收并解析用户命令，否则进入一个for（;;）循环中，通过`readline(CONFIG_SYS_PROMPT)`接收用户命令，然后调用`run_command(cmd,flag)`去解析并执行命令。
