;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;			Test tll script for TMR2			;;
;;		    	scuclk=133,2	     			;;
;;			By DF 20140910			  			;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;


connect '/C=1 /BAUD=115200'

:START
wait "Hit any key to stop autoboot:"
send #3

yesnobox "Change System Clock?" "CAUTION"  ;[message] -[title]
if result=0 goto INIT

sendln "scuclk"	;write "scuclk" to termal
wait "scuclk>"
send "2"
wait "Set CPUCLK:HCLK clock ratio"
wait "scuclk>"
send "2"
wait "confirm the set(y or n)"
send "y"
wait "save to env(y or n)"
send "y"
wait "Socle-CDK"
mpause 500

:INIT
sendln "mw 18040114 0xffffffff"		;set irq enable
mpause 500
sendln "mw 1d100028 0x182"	; init timer2
mpause 500
sendln "mw 1d100020 0xa"	; set count value
mpause 500
goto TEST

:TEST
;messagebox "Write command to IP" "- MSG -"

sendln "md 1d100020 4"		;read current calue
mpause 500
sendln "md 18040104"		;read ISR
mpause 500
sendln "md 18040108"		;read pending irq-----200f0400
mpause 500

goto TEST1
:TEST1
sendln "md 1d100020"		;read current calue
mpause 500
sendln "md 18040104"		;read ISR
mpause 500
sendln "mw 18040118 0"		;clr ISR
mpause 500
sendln "md 18040104"
mpause 500
sendln "md 18040108"		;read pending reg
mpause 500
goto TEST1













;pause 1 ;delay 0.5s
;messagebox "Start transfer" "- MSG -"
;enablekeyb 1


